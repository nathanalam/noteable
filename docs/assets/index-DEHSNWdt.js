(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const t=document.getElementById("noteCanvas"),i=t.getContext("2d",{desynchronized:!0}),g=document.getElementById("exportBtn"),y=document.getElementById("importFile");t.width=1920;t.height=1080;let l=!1,u=0,f=0;function p(n){const e=t.getBoundingClientRect(),s=t.width/e.width,c=t.height/e.height;return{x:(n.clientX-e.left)*s,y:(n.clientY-e.top)*c,pressure:n.pressure!==0?n.pressure:.5}}function m(n){if(n.pointerType==="mouse"||n.pointerType==="touch"&&n.isPrimary===!1)return;l=!0;const e=p(n);u=e.x,f=e.y,i.beginPath(),i.moveTo(u,f),n.preventDefault()}function d(n){l&&(l=!1,i.stroke())}function h(n){if(!l||n.pointerType==="mouse"||n.pointerType==="touch"&&n.isPrimary===!1)return;n.preventDefault();const e=p(n),s=.5,c=20,o=.2,r=e.pressure,a=s+(c-s)*((1-r)*(1-r)*0+2*(1-r)*r*o+r*r*1);i.lineWidth=a,i.lineCap="round",i.lineJoin="round",i.strokeStyle="black",i.lineTo(e.x,e.y),i.stroke(),i.beginPath(),i.moveTo(e.x,e.y),u=e.x,f=e.y}t.removeEventListener("pointerdown",m);t.removeEventListener("pointermove",h);t.removeEventListener("pointerup",d);t.removeEventListener("pointerout",d);t.removeEventListener("pointercancel",d);t.addEventListener("pointerdown",m);t.addEventListener("pointermove",h);t.addEventListener("pointerup",d);t.addEventListener("pointerout",d);t.addEventListener("pointercancel",d);t.style.touchAction!==void 0&&(t.style.touchAction="none");g.addEventListener("click",L);function L(){const n=t.toDataURL("image/png"),e=document.createElement("a");e.href=n,e.download="handwritten_notes.png",e.click()}y.addEventListener("change",v);function v(n){const e=n.target.files[0];if(e){const s=new FileReader;s.onload=function(c){const o=new Image;o.onload=function(){i.clearRect(0,0,t.width,t.height),i.drawImage(o,0,0,t.width,t.height)},o.src=c.target.result},s.readAsDataURL(e)}}
